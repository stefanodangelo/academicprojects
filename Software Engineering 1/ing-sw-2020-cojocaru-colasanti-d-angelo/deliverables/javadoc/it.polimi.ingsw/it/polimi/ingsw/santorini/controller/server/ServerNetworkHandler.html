<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="it">
<head>
<!-- Generated by javadoc (13.0.2) on Fri Jul 03 22:41:21 CEST 2020 -->
<title>ServerNetworkHandler</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-07-03">
<meta name="description" content="declaration: module: it.polimi.ingsw, package: it.polimi.ingsw.santorini.controller.server, class: ServerNetworkHandler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":9,"i8":10,"i9":9,"i10":9,"i11":9,"i12":9,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="moduleLabelInType">Module</span>&nbsp;<a href="../../../../../../module-summary.html">it.polimi.ingsw</a></div>
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">it.polimi.ingsw.santorini.controller.server</a></div>
<h1 title="Class ServerNetworkHandler" class="title">Class ServerNetworkHandler</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance"><a href="Observable.html" title="class in it.polimi.ingsw.santorini.controller.server">it.polimi.ingsw.santorini.controller.server.Observable</a>&lt;java.lang.Object&gt;
<div class="inheritance">it.polimi.ingsw.santorini.controller.server.ServerNetworkHandler</div>
</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="typeNameLabel">ServerNetworkHandler</span>
extends <a href="Observable.html" title="class in it.polimi.ingsw.santorini.controller.server">Observable</a>&lt;java.lang.Object&gt;</pre>
<div class="block">Brief Singleton handling the server network by a list of observers</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>private java.util.List&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#activeNames">activeNames</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.concurrent.ExecutorService</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executor">executor</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#gameStarted">gameStarted</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#gameStatusLock">gameStatusLock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="ServerNetworkHandler.html" title="class in it.polimi.ingsw.santorini.controller.server">ServerNetworkHandler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#instance">instance</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Integer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#port">port</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../MessageReceiver.html" title="class in it.polimi.ingsw.santorini.controller">MessageReceiver</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#receiver">receiver</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.net.ServerSocket</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#serverSocket">serverSocket</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="inheritedList">
<h3>Fields inherited from class&nbsp;it.polimi.ingsw.santorini.controller.server.<a href="Observable.html" title="class in it.polimi.ingsw.santorini.controller.server">Observable</a></h3>
<a id="fields.inherited.from.class.it.polimi.ingsw.santorini.controller.server.Observable">
<!--   -->
</a><code><a href="Observable.html#CURRENT_CAPABILITY">CURRENT_CAPABILITY</a>, <a href="Observable.html#HOST_ID">HOST_ID</a>, <a href="Observable.html#MAX_CAPABILITY">MAX_CAPABILITY</a>, <a href="Observable.html#MIN_NUMOF_PLAYERS">MIN_NUMOF_PLAYERS</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colSecond" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">ServerNetworkHandler</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Sets all the server's parameters and creates a new ExecutorService to execute all the interactions with each client</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acceptPlayers()">acceptPlayers</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Accepts whoever tries to connect to the server, but only if there's enough capability</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addName(java.lang.Integer,java.lang.String)">addName</a></span>&#8203;(java.lang.Integer&nbsp;id,
java.lang.String&nbsp;name)</code></th>
<td class="colLast">
<div class="block">Brief Adds a name at a specific position, that is id - 1, in the names list</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#allowStart()">allowStart</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectToClient(java.net.Socket)">connectToClient</a></span>&#8203;(java.net.Socket&nbsp;socket)</code></th>
<td class="colLast">
<div class="block">Brief Connects the server to the corresponding client's socket, executing the interaction between the two parties</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createServer()">createServer</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Creates the server, closing the application if something went wrong with the creation process</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#disconnect(it.polimi.ingsw.santorini.controller.server.Observer,java.lang.Integer,boolean)">disconnect</a></span>&#8203;(<a href="Observer.html" title="interface in it.polimi.ingsw.santorini.controller.server">Observer</a>&lt;java.lang.Object&gt;&nbsp;observer,
java.lang.Integer&nbsp;id,
boolean&nbsp;onKickedPlayer)</code></th>
<td class="colLast">
<div class="block">Brief Removes a specific connection between server and client
 The id must be subtracted by 1 because of the adopted convention about the players' ids that start from 1 instead of 0</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getActiveNames()">getActiveNames</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getActualCapability()">getActualCapability</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>java.util.List&lt;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getClientsIds()">getClientsIds</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHostId()">getHostId</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>static <a href="ServerNetworkHandler.html" title="class in it.polimi.ingsw.santorini.controller.server">ServerNetworkHandler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInstance()">getInstance</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxCapability()">getMaxCapability</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMinCapability()">getMinCapability</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initializeNames()">initializeNames</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Removes all the names already contained in the list of connected players' names and initializes it with an empty value
 The method maintains the names list with a dimension that is equal to the maximum capability of the server to also keep the right order of connections established by the clients</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isGameStarted()">isGameStarted</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#listen()">listen</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Makes the server waiting for the receiving of a connection request from a client</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loadCardsAndMap()">loadCardsAndMap</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Loads the map and the game cards in a separated thread</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#notifyClients(java.lang.String)">notifyClients</a></span>&#8203;(java.lang.String&nbsp;disconnectedPlayerName)</code></th>
<td class="colLast">
<div class="block">Brief Notifies the clients still connected to the server about the just occurred disconnection</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#receive(it.polimi.ingsw.santorini.communication.GameMessage)">receive</a></span>&#8203;(<a href="../../communication/GameMessage.html" title="class in it.polimi.ingsw.santorini.communication">GameMessage</a>&nbsp;message)</code></th>
<td class="colLast">
<div class="block">Brief Receives a message and, if the message is a broadcast one, forwards it to the other clients</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reloadLobby()">reloadLobby</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Brings the server back to the lobby phase at the end of a game</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restartServer()">restartServer</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Restarts the server by unregistering all the listening Observers and by reinitializing the needed parameters.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#send(java.lang.Integer,java.lang.Object)">send</a></span>&#8203;(java.lang.Integer&nbsp;clientId,
java.lang.Object&nbsp;message)</code></th>
<td class="colLast">
<div class="block">Brief Sends a message to a client or to all the connected clients
 The id must be subtracted by 1 because of the adopted convention about the players' ids that start from 1 instead of 0</div>
</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sendCommandsList(boolean)">sendCommandsList</a></span>&#8203;(boolean&nbsp;onlyToHost)</code></th>
<td class="colLast">
<div class="block">Brief Sends a specific list of commands to each player or to a specific player
 The notification follows id+1 convention</div>
</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sendToWaitingPlayers(java.lang.Object,java.lang.Integer)">sendToWaitingPlayers</a></span>&#8203;(java.lang.Object&nbsp;message,
java.lang.Integer&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Brief Sends a message to all the players except the current playing one</div>
</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setGameStarted(boolean)">setGameStarted</a></span>&#8203;(boolean&nbsp;gameStarted)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLobbyDimension(java.lang.Integer)">setLobbyDimension</a></span>&#8203;(java.lang.Integer&nbsp;dimension)</code></th>
<td class="colLast">
<div class="block">Brief Resizes lobby's capability if it has a legit value and if the resize doesn't entail to kick a client</div>
</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setReceiver(it.polimi.ingsw.santorini.controller.MessageReceiver)">setReceiver</a></span>&#8203;(<a href="../MessageReceiver.html" title="class in it.polimi.ingsw.santorini.controller">MessageReceiver</a>&nbsp;receiver)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startGame()">startGame</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Starts a new game on a separate thread, sending to each client the parameters needed for the setup</div>
</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startServer(java.lang.Integer)">startServer</a></span>&#8203;(java.lang.Integer&nbsp;port)</code></th>
<td class="colLast">
<div class="block">Brief Creates the server and connects it to the clients on a certain specified port</div>
</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#unregisterClient(it.polimi.ingsw.santorini.controller.server.Observer,java.lang.String)">unregisterClient</a></span>&#8203;(<a href="Observer.html" title="interface in it.polimi.ingsw.santorini.controller.server">Observer</a>&lt;java.lang.Object&gt;&nbsp;observer,
java.lang.String&nbsp;disconnectedPlayerName)</code></th>
<td class="colLast">
<div class="block">Brief Unregister the disconnected client and updates the list of active names
      * @implNote the method maintains the names list with a dimension that is equal to the maximum capability of the server to also keep the right order of connections established by the clients</div>
</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitEndGame()">waitEndGame</a></span>()</code></th>
<td class="colLast">
<div class="block">Brief Waits for the end of the game by synchronizing on a lock Object</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;it.polimi.ingsw.santorini.controller.server.<a href="Observable.html" title="class in it.polimi.ingsw.santorini.controller.server">Observable</a></h3>
<a id="methods.inherited.from.class.it.polimi.ingsw.santorini.controller.server.Observable">
<!--   -->
</a><code><a href="Observable.html#getObserversNumber()">getObserversNumber</a>, <a href="Observable.html#notifyObservers(java.lang.Integer,T)">notifyObservers</a>, <a href="Observable.html#notifyObservers(T)">notifyObservers</a>, <a href="Observable.html#registerObserver(it.polimi.ingsw.santorini.controller.server.Observer)">registerObserver</a>, <a href="Observable.html#unregisterAllObservers()">unregisterAllObservers</a>, <a href="Observable.html#unregisterObserver(it.polimi.ingsw.santorini.controller.server.Observer)">unregisterObserver</a>, <a href="Observable.html#updateObserversIds()">updateObserversIds</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="instance">instance</a></h3>
<div class="memberSignature"><span class="modifiers">private static</span>&nbsp;<span class="returnType"><a href="ServerNetworkHandler.html" title="class in it.polimi.ingsw.santorini.controller.server">ServerNetworkHandler</a></span>&nbsp;<span class="memberName">instance</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="port">port</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.lang.Integer</span>&nbsp;<span class="memberName">port</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="serverSocket">serverSocket</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.net.ServerSocket</span>&nbsp;<span class="memberName">serverSocket</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="executor">executor</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.util.concurrent.ExecutorService</span>&nbsp;<span class="memberName">executor</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="gameStarted">gameStarted</a></h3>
<div class="memberSignature"><span class="modifiers">private volatile</span>&nbsp;<span class="returnType">java.lang.Boolean</span>&nbsp;<span class="memberName">gameStarted</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="activeNames">activeNames</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.util.List&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">activeNames</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="receiver">receiver</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType"><a href="../MessageReceiver.html" title="class in it.polimi.ingsw.santorini.controller">MessageReceiver</a></span>&nbsp;<span class="memberName">receiver</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="gameStatusLock">gameStatusLock</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.lang.Object</span>&nbsp;<span class="memberName">gameStatusLock</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;()">ServerNetworkHandler</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="memberName">ServerNetworkHandler</span>()</div>
<div class="block">Brief Sets all the server's parameters and creates a new ExecutorService to execute all the interactions with each client</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="getInstance()">getInstance</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType"><a href="ServerNetworkHandler.html" title="class in it.polimi.ingsw.santorini.controller.server">ServerNetworkHandler</a></span>&nbsp;<span class="memberName">getInstance</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the instance of the only one ServerNetworkHandler created</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="initializeNames()">initializeNames</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">initializeNames</span>()</div>
<div class="block">Brief Removes all the names already contained in the list of connected players' names and initializes it with an empty value
 The method maintains the names list with a dimension that is equal to the maximum capability of the server to also keep the right order of connections established by the clients</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="allowStart()">allowStart</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">allowStart</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the number of players is correct and the game can consequently start</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="send(java.lang.Integer,java.lang.Object)">send</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">send</span>&#8203;(<span class="arguments">java.lang.Integer&nbsp;clientId,
java.lang.Object&nbsp;message)</span></div>
<div class="block">Brief Sends a message to a client or to all the connected clients
 The id must be subtracted by 1 because of the adopted convention about the players' ids that start from 1 instead of 0</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>clientId</code> - is the id of the client that will receive the message</dd>
<dd><code>message</code> - is the message to send</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sendToWaitingPlayers(java.lang.Object,java.lang.Integer)">sendToWaitingPlayers</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">sendToWaitingPlayers</span>&#8203;(<span class="arguments">java.lang.Object&nbsp;message,
java.lang.Integer&nbsp;id)</span></div>
<div class="block">Brief Sends a message to all the players except the current playing one</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - is the message to send</dd>
<dd><code>id</code> - is the id of the player who mustn't receive the message</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="receive(it.polimi.ingsw.santorini.communication.GameMessage)">receive</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">receive</span>&#8203;(<span class="arguments"><a href="../../communication/GameMessage.html" title="class in it.polimi.ingsw.santorini.communication">GameMessage</a>&nbsp;message)</span></div>
<div class="block">Brief Receives a message and, if the message is a broadcast one, forwards it to the other clients</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - is the received message</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startServer(java.lang.Integer)">startServer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">startServer</span>&#8203;(<span class="arguments">java.lang.Integer&nbsp;port)</span></div>
<div class="block">Brief Creates the server and connects it to the clients on a certain specified port</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>port</code> - is the port through which the communication takes place</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="acceptPlayers()">acceptPlayers</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">acceptPlayers</span>()</div>
<div class="block">Brief Accepts whoever tries to connect to the server, but only if there's enough capability</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="waitEndGame()">waitEndGame</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">waitEndGame</span>()</div>
<div class="block">Brief Waits for the end of the game by synchronizing on a lock Object</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="createServer()">createServer</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">createServer</span>()</div>
<div class="block">Brief Creates the server, closing the application if something went wrong with the creation process</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="listen()">listen</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">listen</span>()
             throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Brief Makes the server waiting for the receiving of a connection request from a client</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startGame()">startGame</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">startGame</span>()</div>
<div class="block">Brief Starts a new game on a separate thread, sending to each client the parameters needed for the setup</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="loadCardsAndMap()">loadCardsAndMap</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">loadCardsAndMap</span>()</div>
<div class="block">Brief Loads the map and the game cards in a separated thread</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="connectToClient(java.net.Socket)">connectToClient</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">connectToClient</span>&#8203;(<span class="arguments">java.net.Socket&nbsp;socket)</span></div>
<div class="block">Brief Connects the server to the corresponding client's socket, executing the interaction between the two parties</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>socket</code> - is the socket linked to the client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="disconnect(it.polimi.ingsw.santorini.controller.server.Observer,java.lang.Integer,boolean)">disconnect</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">disconnect</span>&#8203;(<span class="arguments"><a href="Observer.html" title="interface in it.polimi.ingsw.santorini.controller.server">Observer</a>&lt;java.lang.Object&gt;&nbsp;observer,
java.lang.Integer&nbsp;id,
boolean&nbsp;onKickedPlayer)</span></div>
<div class="block">Brief Removes a specific connection between server and client
 The id must be subtracted by 1 because of the adopted convention about the players' ids that start from 1 instead of 0</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>observer</code> - is the connection to remove from the server</dd>
<dd><code>onKickedPlayer</code> - is true if the disconnection takes place during the kick of a player</dd>
<dd><code>id</code> - is the playerId</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="unregisterClient(it.polimi.ingsw.santorini.controller.server.Observer,java.lang.String)">unregisterClient</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">unregisterClient</span>&#8203;(<span class="arguments"><a href="Observer.html" title="interface in it.polimi.ingsw.santorini.controller.server">Observer</a>&lt;java.lang.Object&gt;&nbsp;observer,
java.lang.String&nbsp;disconnectedPlayerName)</span></div>
<div class="block">Brief Unregister the disconnected client and updates the list of active names
      * @implNote the method maintains the names list with a dimension that is equal to the maximum capability of the server to also keep the right order of connections established by the clients</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>observer</code> - is the client who has just disconnected</dd>
<dd><code>disconnectedPlayerName</code> - is the name of the client who has just disconnected</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="notifyClients(java.lang.String)">notifyClients</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">notifyClients</span>&#8203;(<span class="arguments">java.lang.String&nbsp;disconnectedPlayerName)</span></div>
<div class="block">Brief Notifies the clients still connected to the server about the just occurred disconnection</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>disconnectedPlayerName</code> - is the name of the player who has just disconnected</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="restartServer()">restartServer</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">restartServer</span>()</div>
<div class="block">Brief Restarts the server by unregistering all the listening Observers and by reinitializing the needed parameters. It also wakes up the server in order to make it listen for any new incoming connection</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="reloadLobby()">reloadLobby</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">reloadLobby</span>()</div>
<div class="block">Brief Brings the server back to the lobby phase at the end of a game</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getActiveNames()">getActiveNames</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.List&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">getActiveNames</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the list of clients' names connected to the server</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="addName(java.lang.Integer,java.lang.String)">addName</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">addName</span>&#8203;(<span class="arguments">java.lang.Integer&nbsp;id,
java.lang.String&nbsp;name)</span></div>
<div class="block">Brief Adds a name at a specific position, that is id - 1, in the names list</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - is the value of the index, increased by 1, where the name will be put</dd>
<dd><code>name</code> - is the name to insert in the list</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isGameStarted()">isGameStarted</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isGameStarted</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setGameStarted(boolean)">setGameStarted</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setGameStarted</span>&#8203;(<span class="arguments">boolean&nbsp;gameStarted)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setLobbyDimension(java.lang.Integer)">setLobbyDimension</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">setLobbyDimension</span>&#8203;(<span class="arguments">java.lang.Integer&nbsp;dimension)</span></div>
<div class="block">Brief Resizes lobby's capability if it has a legit value and if the resize doesn't entail to kick a client</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dimension</code> - is the new wanted dimension's value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the size has been successfully changed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getHostId()">getHostId</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.lang.Integer</span>&nbsp;<span class="memberName">getHostId</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMinCapability()">getMinCapability</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.lang.Integer</span>&nbsp;<span class="memberName">getMinCapability</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getActualCapability()">getActualCapability</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.lang.Integer</span>&nbsp;<span class="memberName">getActualCapability</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMaxCapability()">getMaxCapability</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.lang.Integer</span>&nbsp;<span class="memberName">getMaxCapability</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setReceiver(it.polimi.ingsw.santorini.controller.MessageReceiver)">setReceiver</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setReceiver</span>&#8203;(<span class="arguments"><a href="../MessageReceiver.html" title="class in it.polimi.ingsw.santorini.controller">MessageReceiver</a>&nbsp;receiver)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getClientsIds()">getClientsIds</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.List&lt;java.lang.Integer&gt;</span>&nbsp;<span class="memberName">getClientsIds</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list containing the ids of all the clients connected to the server</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sendCommandsList(boolean)">sendCommandsList</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">sendCommandsList</span>&#8203;(<span class="arguments">boolean&nbsp;onlyToHost)</span></div>
<div class="block">Brief Sends a specific list of commands to each player or to a specific player
 The notification follows id+1 convention</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>onlyToHost</code> - specify whether to send the message to everyone or only to the host</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
